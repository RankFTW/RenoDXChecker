<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="RenoDXChecker.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:RenoDXChecker.ViewModels"
    Title="RDXC - RenoDXChecker">

    <!-- Palette: #10141F bg, #1A2035 card, #6B7FCB accent, #4E9B6F green, #C07A50 amber -->

    <Grid Background="#10141F">
        <Grid.Resources>
            <x:Double x:Key="CardItemWidth">390</x:Double>
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- header -->
            <RowDefinition Height="Auto"/>  <!-- filter bar -->
            <RowDefinition Height="*"/>     <!-- cards area -->
            <RowDefinition Height="Auto"/>  <!-- status bar -->
        </Grid.RowDefinitions>

        <!-- ‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <Border Grid.Row="0" Padding="20,14" Background="#0C1020"
                BorderBrush="#222A45" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Logo + title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                    <Border Width="36" Height="36" CornerRadius="10" Background="#2A3A6A">
                        <TextBlock Text="RDXC" FontSize="11" FontWeight="Bold" Foreground="#8BA4E8"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock FontSize="16" FontWeight="SemiBold">
                            <Run Text="RDXC" Foreground="#8BA4E8"/>
                        </TextBlock>
                        <TextBlock Text="RenoDX Mod Installer" FontSize="11" Foreground="#404870"/>
                    </StackPanel>


                </StackPanel>

                <!-- Search -->
                <TextBox Grid.Column="1"
                         x:Name="SearchBox"
                         PlaceholderText="üîç  Search games..."
                         TextChanged="SearchBox_TextChanged"
                         Background="#141828" Foreground="#B0BAD8"
                         BorderBrush="#252E50" BorderThickness="1"
                         CornerRadius="8" Padding="12,8"
                         FontSize="13"
                         MaxWidth="380" HorizontalAlignment="Center" VerticalAlignment="Center"/>

                <!-- Action buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                    <Button x:Name="AddGameBtn" Content="‚ûï Add Game"
                            Click="AddGameButton_Click"
                            Background="#1A2840" Foreground="#7AACDA"
                            BorderBrush="#2A4060" BorderThickness="1"
                            CornerRadius="8" Padding="12,7" FontSize="12"/>
                    <!-- Single Refresh button (permanent full rescan) -->
                    <Button x:Name="RefreshBtn" Content="‚Üª Refresh"
                            Click="RefreshButton_Click"
                            Background="#161E38" Foreground="#8896C0"
                            BorderBrush="#222A45" BorderThickness="1"
                            CornerRadius="8" Padding="12,7" FontSize="12"/>
                    <Button x:Name="AboutBtn" Content="?"
                            Click="AboutButton_Click"
                            Background="#161E38" Foreground="#6070A0"
                            BorderBrush="#222A45" BorderThickness="1"
                            CornerRadius="8" Width="34" FontSize="14"/>
                    <Button x:Name="TuneBtn" Content="Tune" Click="TuneButton_Click" Background="#161E38" Foreground="#8896C0" BorderBrush="#222A45" BorderThickness="1" CornerRadius="8" Padding="10,6" FontSize="12"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ‚ïê‚ïê FILTER BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <Border Grid.Row="1" Padding="20,8" Background="#0E1226"
                BorderBrush="#1C2440" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="6">
                    <Button x:Name="FilterDetected" Content="üéÆ All Games" Tag="Detected"
                            Click="Filter_Click"
                            Background="#1E2850" Foreground="White"
                            BorderThickness="0" CornerRadius="7" Padding="12,6" FontSize="12"/>
                    <Button x:Name="FilterInstalled" Content="‚úì Installed" Tag="Installed"
                            Click="Filter_Click"
                            Background="#161E38" Foreground="#8896C0"
                            BorderThickness="0" CornerRadius="7" Padding="12,6" FontSize="12"/>
                    <Button x:Name="FilterHidden" Content="üôà Hidden" Tag="Hidden"
                            Click="Filter_Click"
                            Background="#161E38" Foreground="#8896C0"
                            BorderThickness="0" CornerRadius="7" Padding="12,6" FontSize="12"/>
                    <Button x:Name="FilterUnity" Content="Unity" Tag="Unity"
                            Click="Filter_Click"
                            Background="#161E38" Foreground="#8896C0"
                            BorderThickness="0" CornerRadius="7" Padding="12,6" FontSize="12"/>
                    <Button x:Name="FilterUnreal" Content="Unreal" Tag="Unreal"
                            Click="Filter_Click"
                            Background="#161E38" Foreground="#8896C0"
                            BorderThickness="0" CornerRadius="7" Padding="12,6" FontSize="12"/>
                    <Button x:Name="FilterOther" Content="Other" Tag="Other"
                            Click="Filter_Click"
                            Background="#161E38" Foreground="#8896C0"
                            BorderThickness="0" CornerRadius="7" Padding="12,6" FontSize="12"/>
                </StackPanel>
                <!-- Spacer -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                    <Ellipse x:Name="StatusDot" Width="8" Height="8" Fill="#80A890"/>
                    <TextBlock x:Name="GameCountText" Text="0 shown"
                               FontSize="11" Foreground="#404870" VerticalAlignment="Center"/>
                    <TextBlock x:Name="InstalledCountText" Text="0 installed"
                               FontSize="11" Foreground="#4E7860" VerticalAlignment="Center"/>
                    <TextBlock x:Name="HiddenCountText" Text=""
                               FontSize="11" Foreground="#604868" VerticalAlignment="Center"/>
                    <!-- ShowHidden toggle removed; hidden games are shown via the Hidden tab -->
                </StackPanel>
            </Grid>
        </Border>

        <!-- ‚ïê‚ïê MAIN AREA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <Grid Grid.Row="2">

            <!-- Loading overlay -->
            <StackPanel x:Name="LoadingPanel" VerticalAlignment="Center" HorizontalAlignment="Center"
                        Spacing="16" Visibility="Visible">
                <ProgressRing x:Name="LoadingRing" IsActive="True" Width="48" Height="48"
                              Foreground="#6B7FCB"/>
                <TextBlock x:Name="LoadingTitle" Text="Loading..." FontSize="16"
                           Foreground="#8896C0" HorizontalAlignment="Center"/>
                <TextBlock x:Name="LoadingSubtitle" Text="" FontSize="12"
                           Foreground="#404870" HorizontalAlignment="Center"/>
            </StackPanel>

            <!-- ‚ïê‚ïê ABOUT PANEL (overlays the cards area, hidden by default) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <Grid x:Name="AboutPanel" Visibility="Collapsed" Background="#10141F">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>  <!-- back button bar -->
                    <RowDefinition Height="*"/>     <!-- scrollable content -->
                </Grid.RowDefinitions>

                <!-- Back button bar -->
                <Border Grid.Row="0" Padding="16,10" Background="#0C1020"
                        BorderBrush="#222A45" BorderThickness="0,0,0,1">
                    <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                        <Button x:Name="AboutBackBtn" Content="‚Üê Back"
                                Click="AboutBack_Click"
                                Background="#1A2840" Foreground="#7AACDA"
                                BorderBrush="#2A4060" BorderThickness="1"
                                CornerRadius="8" Padding="12,6" FontSize="12"/>
                        <TextBlock Text="About" FontSize="15" FontWeight="SemiBold"
                                   Foreground="#8090C0" VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <!-- Scrollable about content -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <StackPanel Padding="32,24,32,40" Spacing="16" MaxWidth="680"
                                HorizontalAlignment="Left">

                        <!-- Hero row -->
                        <StackPanel Orientation="Horizontal" Spacing="16" Margin="0,0,0,8">
                            <Border Width="52" Height="52" CornerRadius="14" Background="#1A2448">
                                <TextBlock Text="R" FontSize="28" FontWeight="Bold" Foreground="#7A9AD8"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <StackPanel VerticalAlignment="Center" Spacing="4">
                                <TextBlock FontSize="22" FontWeight="Bold">
                                    <Run Text="RDXC" Foreground="#8BA4E8"/>
                                    <Run Text=" ‚Äî RenoDX Mod Manager" Foreground="#C0C8E8"/>
                                </TextBlock>
                                <TextBlock Text="Version 1.0.2  ¬∑  Unofficial companion tool by RankFTW"
                                           FontSize="12" Foreground="#3A4466"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- Disclaimer -->
                        <Border Background="#18141E" CornerRadius="10" Padding="16,12"
                                BorderBrush="#2A2038" BorderThickness="1">
                            <StackPanel Spacing="6">
                                <TextBlock Text="‚ö†  Disclaimer" FontSize="12" FontWeight="SemiBold"
                                           Foreground="#A07050"/>
                                <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#A090A0" LineHeight="20">
                                    <Run Text="This is an unofficial third-party tool, "/>
                                    <Run Text="not affiliated with or endorsed by the RenoDX project."
                                         FontWeight="SemiBold" Foreground="#C0A0B0"/>
                                    <Run Text=" All mod files are downloaded directly from official RenoDX GitHub snapshots."/>
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- What it does -->
                        <Border Background="#121828" CornerRadius="10" Padding="16,12"
                                BorderBrush="#1C2440" BorderThickness="1">
                            <StackPanel Spacing="8">
                                <TextBlock Text="What this app does" FontSize="12" FontWeight="SemiBold"
                                           Foreground="#A0B0D8"/>
                                <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#8090B0" LineHeight="20">
                                    Automatically detects games installed via Steam, GOG, Epic Games, and EA App.
                                    Matches them against the RenoDX wiki mod list and lets you install or update HDR mods
                                    with a single click. Identifies Unreal Engine and Unity games and offers generic
                                    engine plugins where no game-specific mod exists. Tracks installed mods and alerts
                                    you when updates are available.
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- How to use -->
                        <Border Background="#121828" CornerRadius="10" Padding="16,14"
                                BorderBrush="#1C2440" BorderThickness="1">
                            <StackPanel Spacing="12">
                                <TextBlock Text="How to use" FontSize="12" FontWeight="SemiBold"
                                           Foreground="#A0B0D8"/>
                                <StackPanel Spacing="10">

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Border Grid.Column="0" Background="#1E2A50" CornerRadius="12" Width="24" Height="24">
                                            <TextBlock Text="1" FontSize="11" FontWeight="Bold" Foreground="#6888D0"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Grid.Column="1" TextWrapping="Wrap" FontSize="12" Foreground="#8090B0" LineHeight="19" VerticalAlignment="Center" Margin="12,0,0,0">
                                            <Run FontWeight="SemiBold" Foreground="#8090C0">Install ReShade with Addon Support</Run>
                                            <Run Text=" ‚Äî download from reshade.me. When installing, select 'with full addon support'. No shader packages needed."/>
                                        </TextBlock>
                                    </Grid>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Border Grid.Column="0" Background="#1E2A50" CornerRadius="12" Width="24" Height="24">
                                            <TextBlock Text="2" FontSize="11" FontWeight="Bold" Foreground="#6888D0"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Grid.Column="1" TextWrapping="Wrap" FontSize="12" Foreground="#8090B0" LineHeight="19" VerticalAlignment="Center" Margin="12,0,0,0">
                                            <Run FontWeight="SemiBold" Foreground="#8090C0">Find your game in the list</Run>
                                            <Run Text=" ‚Äî games are detected automatically. If yours is missing, click "/>
                                            <Run Text="‚ûï Add Game" FontWeight="SemiBold" Foreground="#6878A0"/>
                                            <Run Text=" and enter the game name and folder."/>
                                        </TextBlock>
                                    </Grid>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Border Grid.Column="0" Background="#1E2A50" CornerRadius="12" Width="24" Height="24">
                                            <TextBlock Text="3" FontSize="11" FontWeight="Bold" Foreground="#6888D0"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Grid.Column="1" TextWrapping="Wrap" FontSize="12" Foreground="#8090B0" LineHeight="19" VerticalAlignment="Center" Margin="12,0,0,0">
                                            <Run FontWeight="SemiBold" Foreground="#8090C0">Check ‚Ñπ and üí¨</Run>
                                            <Run Text=" ‚Äî tap ‚Ñπ for game-specific setup notes. Tap üí¨ (when shown) to open the RenoDX discussion thread for that game."/>
                                        </TextBlock>
                                    </Grid>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Border Grid.Column="0" Background="#1E2A50" CornerRadius="12" Width="24" Height="24">
                                            <TextBlock Text="4" FontSize="11" FontWeight="Bold" Foreground="#6888D0"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Grid.Column="1" TextWrapping="Wrap" FontSize="12" Foreground="#8090B0" LineHeight="19" VerticalAlignment="Center" Margin="12,0,0,0">
                                            <Run FontWeight="SemiBold" Foreground="#8090C0">Click Install</Run>
                                            <Run Text=" ‚Äî the .addon64 file is placed next to the game exe. For Unreal games: "/>
                                            <Run Text="Binaries\Win64" FontFamily="Consolas" Foreground="#6878A0"/>
                                            <Run Text=". For Unity games: next to "/>
                                            <Run Text="UnityPlayer.dll" FontFamily="Consolas" Foreground="#6878A0"/>
                                            <Run Text="."/>
                                        </TextBlock>
                                    </Grid>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Border Grid.Column="0" Background="#1E2A50" CornerRadius="12" Width="24" Height="24">
                                            <TextBlock Text="5" FontSize="11" FontWeight="Bold" Foreground="#6888D0"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Grid.Column="1" TextWrapping="Wrap" FontSize="12" Foreground="#8090B0" LineHeight="19" VerticalAlignment="Center" Margin="12,0,0,0">
                                            <Run FontWeight="SemiBold" Foreground="#8090C0">Launch your game</Run>
                                            <Run Text=" ‚Äî press "/>
                                            <Run Text="Home" FontWeight="SemiBold" Foreground="#6878A0"/>
                                            <Run Text=" to open the ReShade menu. Go to the "/>
                                            <Run Text="Add-ons" FontWeight="SemiBold" Foreground="#6878A0"/>
                                            <Run Text=" tab to configure RenoDX."/>
                                        </TextBlock>
                                    </Grid>

                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Links -->
                        <Border Background="#121828" CornerRadius="10" Padding="16,12"
                                BorderBrush="#1C2440" BorderThickness="1">
                            <StackPanel Spacing="8">
                                <TextBlock Text="Links" FontSize="12" FontWeight="SemiBold" Foreground="#A0B0D8"/>
                                <HyperlinkButton NavigateUri="https://github.com/clshortfuse/renodx" Padding="0">
                                    <TextBlock Foreground="#7A9ACA" FontSize="12">üåê  RenoDX Project ‚Äî github.com/clshortfuse/renodx</TextBlock>
                                </HyperlinkButton>
                                <HyperlinkButton NavigateUri="https://github.com/clshortfuse/renodx/wiki/Mods" Padding="0">
                                    <TextBlock Foreground="#7A9ACA" FontSize="12">üìã  RenoDX Mod List Wiki</TextBlock>
                                </HyperlinkButton>
                                <HyperlinkButton NavigateUri="https://reshade.me" Padding="0">
                                    <TextBlock Foreground="#7A9ACA" FontSize="12">üéÆ  ReShade (with Addon Support) ‚Äî reshade.me</TextBlock>
                                </HyperlinkButton>
                                <HyperlinkButton NavigateUri="https://discord.gg/gF4GRJWZ2A" Padding="0">
                                    <TextBlock Foreground="#7A9ACA" FontSize="12">üí¨  RenoDX Discord</TextBlock>
                                </HyperlinkButton>
                                <HyperlinkButton NavigateUri="https://github.com/RankFTW" Padding="0">
                                    <TextBlock Foreground="#7A9ACA" FontSize="12">üí¨  RankFTW GitHub</TextBlock>
                                </HyperlinkButton>
                                <HyperlinkButton NavigateUri="https://discord.gg/pQtPYcdE" Padding="0">
                                    <TextBlock Foreground="#7A9ACA" FontSize="12">ü§ù  The Ultra Place / Ultra+ ‚Äî join our Discord</TextBlock>
                                </HyperlinkButton>
                            </StackPanel>
                        </Border>

                        <!-- Credits -->
                        <Border Background="#121828" CornerRadius="10" Padding="16,12"
                                BorderBrush="#1C2440" BorderThickness="1">
                            <StackPanel Spacing="8">
                                <TextBlock Text="Credits" FontSize="12" FontWeight="SemiBold" Foreground="#A0B0D8"/>
                                <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#3A4868" LineHeight="20"
                                           Text="All HDR mods are created and maintained by the RenoDX contributors. This app would not exist without their work."/>
                                <TextBlock FontSize="12">
                                    <Run Text="‚≠ê  " Foreground="#706048"/>
                                    <Run Text="clshortfuse" FontWeight="SemiBold" Foreground="#6878A0"/>
                                    <Run Text=" ‚Äî RenoDX creator &amp; primary maintainer" Foreground="#6878A0"/>
                                </TextBlock>
                                <TextBlock FontSize="12">
                                    <Run Text="‚≠ê  " Foreground="#706048"/>
                                    <Run Text="RenoDX community" FontWeight="SemiBold" Foreground="#6878A0"/>
                                    <Run Text=" ‚Äî mod authors across 150+ games" Foreground="#6878A0"/>
                                </TextBlock>
                                <TextBlock FontSize="12">
                                    <Run Text="üîß  " Foreground="#405060"/>
                                    <Run Text="App by RankFTW" FontWeight="SemiBold" Foreground="#5A6A90"/>
                                    <Run Text=" ‚Äî unofficial companion tool" Foreground="#6878A0"/>
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- Crash / Error Logs -->
                        <Border Background="#121820" CornerRadius="10" Padding="16,12"
                                BorderBrush="#1A2038" BorderThickness="1">
                            <StackPanel Spacing="8">
                                <TextBlock Text="ü™≤  Crash &amp; Error Logs" FontSize="12" FontWeight="SemiBold" Foreground="#A0B0D8"/>
                                <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#6878A0" LineHeight="20">
                                    If the app crashes or behaves unexpectedly, a report is automatically saved to your local AppData folder.
                                    You can open that folder here and send any <Run Text="crash_*.txt" FontFamily="Consolas" Foreground="#8090B0"/> files to the developer.
                                </TextBlock>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <Button x:Name="OpenLogsBtn"
                                            Content="üìÇ  Open Logs Folder"
                                            Click="OpenLogsFolder_Click"
                                            Background="#1A2840" Foreground="#7AACDA"
                                            BorderBrush="#2A4060" BorderThickness="1"
                                            CornerRadius="8" Padding="12,6" FontSize="12"/>
                                    <Button x:Name="OpenDownloadsBtn"
                                            Content="üì¶  Open Downloads Cache"
                                            Click="OpenDownloadsFolder_Click"
                                            Background="#1A2840" Foreground="#7AACDA"
                                            BorderBrush="#2A4060" BorderThickness="1"
                                            CornerRadius="8" Padding="12,6" FontSize="12"/>
                                </StackPanel>
                                <TextBlock TextWrapping="Wrap" FontSize="11" Foreground="#404860" LineHeight="18">
                                    Logs: <Run Text="%LocalAppData%\RenoDXChecker\logs\" FontFamily="Consolas" Foreground="#506080"/>. Up to 10 reports kept; older ones deleted automatically.
                                </TextBlock>
                                <TextBlock TextWrapping="Wrap" FontSize="11" Foreground="#404860" LineHeight="18">
                                    Downloads: <Run Text="%LocalAppData%\RenoDXChecker\downloads\" FontFamily="Consolas" Foreground="#506080"/>. Cached addon files ‚Äî delete to force a fresh download.
                                </TextBlock>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </Grid>

            <!-- Cards grid -->
            <ScrollViewer x:Name="CardsScroll" Visibility="Collapsed"
                          VerticalScrollBarVisibility="Auto" Padding="16,14">
                <ItemsControl x:Name="GameCardsList">
                    <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsWrapGrid Orientation="Horizontal" ItemWidth="{StaticResource CardItemWidth}"/>
                            </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                    <ItemsControl.ItemTemplate>
                        <DataTemplate x:DataType="vm:GameCardViewModel">

                            <Border Margin="6" Padding="14,12" CornerRadius="12"
                                    Background="#1C2238" Height="240"
                                    BorderBrush="#2A3860" BorderThickness="1">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="28"/>   <!-- 0: name row -->
                                        <RowDefinition Height="22"/>   <!-- 1: badges row -->
                                        <RowDefinition Height="Auto"/> <!-- 2: file badge (collapses) -->
                                        <RowDefinition Height="26"/>   <!-- 3: path row -->
                                        <RowDefinition Height="*"/>    <!-- 4: spacer -->
                                        <RowDefinition Height="36"/>   <!-- 5: action buttons -->
                                        <RowDefinition Height="Auto"/> <!-- 6: progress/message -->
                                    </Grid.RowDefinitions>

                                    <!-- Row 0: Game name + info + status + hide -->
                                    <Grid Grid.Row="0" VerticalAlignment="Center">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="{x:Bind GameName}"
                                                   FontSize="13" FontWeight="SemiBold" Foreground="#E2E8FF"
                                                   TextTrimming="CharacterEllipsis" MaxLines="1"
                                                   VerticalAlignment="Center"/>
                                        <!-- ‚Ñπ notes button -->
                                        <Button Grid.Column="1"
                                                Visibility="{x:Bind NotesButtonVisibility}"
                                                Click="NotesButton_Click" Tag="{x:Bind}"
                                                Background="Transparent" BorderThickness="0"
                                                Width="26" Height="26" Padding="0" Margin="4,0,0,0"
                                                ToolTipService.ToolTip="View notes">
                                            <TextBlock Text="‚Ñπ" FontSize="13" Foreground="#5A6EA0"/>
                                        </Button>
                                        <!-- üí¨ discussion / wiki link button (only shown when game name has a link) -->
                                        <Button Grid.Column="2"
                                                Visibility="{x:Bind NameLinkVisibility}"
                                                Click="NameLink_Click" Tag="{x:Bind}"
                                                Background="Transparent" BorderThickness="0"
                                                Width="26" Height="26" Padding="0" Margin="2,0,0,0"
                                                ToolTipService.ToolTip="Open discussion / instructions">
                                            <TextBlock Text="üí¨" FontSize="11" Foreground="#5A7A9A"/>
                                        </Button>
                                        <!-- üö´ hide button -->
                                        <Button Grid.Column="3"
                                                Click="HideButton_Click" Tag="{x:Bind}"
                                                Background="Transparent" BorderThickness="0"
                                                Width="26" Height="26" Padding="0" Margin="2,0,0,0"
                                                ToolTipService.ToolTip="{x:Bind HideButtonLabel, Mode=OneWay}">
                                            <Grid>
                                                <!-- Hidden state: bright icon -->
                                                <TextBlock Text="üö´" FontSize="11" Foreground="#9060A0"
                                                           Visibility="{x:Bind IsHiddenVisibility, Mode=OneWay}"/>
                                                <!-- Visible state: dim icon -->
                                                <TextBlock Text="üö´" FontSize="11" Foreground="#282840"
                                                           Visibility="{x:Bind IsNotHiddenVisibility, Mode=OneWay}"/>
                                            </Grid>
                                        </Button>
                                        <!-- Wiki status badge -->
                                        <Border Grid.Column="4" CornerRadius="6" Padding="7,2"
                                                Margin="4,0,0,0"                                                Background="#1C2848" BorderBrush="#283C60" BorderThickness="1">
                                            <TextBlock Text="{x:Bind WikiStatusLabel}"
                                                       FontSize="10" Foreground="#7A9AB8"/>
                                        </Border>
                                        <!-- üéØ per-card match override button -->
                                        <Button Grid.Column="5"
                                                Click="TuneButton_Card_Click" Tag="{x:Bind}"
                                                Background="Transparent" BorderThickness="0"
                                                Width="22" Height="22" Padding="0" Margin="3,0,0,0"
                                                ToolTipService.ToolTip="Override wiki name matching for this game">
                                            <TextBlock Text="üéØ" FontSize="10" Foreground="#30405A"/>
                                        </Button>
                                    </Grid>

                                    <!-- Row 1: Source/Engine/Generic badges -->
                                    <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="4"
                                                VerticalAlignment="Center">
                                        <Border Background="#1E2848" CornerRadius="5" Padding="6,2"
                                                Visibility="{x:Bind SourceBadgeVisibility}">
                                            <TextBlock FontSize="10" Foreground="#8090B8">
                                                <Run Text="{x:Bind SourceIcon}"/>
                                                <Run Text=" "/>
                                                <Run Text="{x:Bind Source}"/>
                                            </TextBlock>
                                        </Border>
                                        <Border Background="#1E2040" CornerRadius="5" Padding="6,2"
                                                BorderBrush="#303460" BorderThickness="1"
                                                Visibility="{x:Bind EngineBadgeVisibility}">
                                            <TextBlock Text="{x:Bind EngineHint}"
                                                       FontSize="10" Foreground="#9AAAD8"/>
                                        </Border>
                                        <Border Background="#28203A" CornerRadius="5" Padding="6,2"
                                                BorderBrush="#48305A" BorderThickness="1"
                                                Visibility="{x:Bind GenericBadgeVisibility}">
                                            <TextBlock Text="{x:Bind GenericModLabel}"
                                                       FontSize="10" Foreground="#B890C8"/>
                                        </Border>
                                        <!-- Update available badge -->
                                        <Border Background="#1A2010" CornerRadius="5" Padding="6,2"
                                                BorderBrush="#2E4020" BorderThickness="1"
                                                Visibility="{x:Bind UpdateBadgeVisibility, Mode=OneWay}">
                                            <TextBlock Text="‚¨Ü Update Available"
                                                       FontSize="10" Foreground="#80B860"/>
                                        </Border>
                                    </StackPanel>

                                    <!-- Row 2: Installed file badge (full width) -->
                                    <Border Grid.Row="2" VerticalAlignment="Center" Margin="0,3,0,0"
                                            Background="#172818" CornerRadius="5" Padding="7,2"
                                            BorderBrush="#284038" BorderThickness="1"
                                            Visibility="{x:Bind InstalledFileLabelVisible, Mode=OneWay}">
                                        <TextBlock Text="{x:Bind InstalledFileLabel, Mode=OneWay}"
                                                   FontSize="10" Foreground="#7AB898"
                                                   TextTrimming="CharacterEllipsis" MaxLines="1"/>
                                    </Border>

                                    <!-- Row 3: Path + folder button -->
                                    <Border Grid.Row="3" Background="#141830" CornerRadius="6"
                                            Padding="8,4" Margin="0,4,0,0">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Grid.Column="0"
                                                       Text="{x:Bind InstallPathDisplay, Mode=OneWay}"
                                                       FontSize="11" Foreground="#6070A0"
                                                       TextTrimming="CharacterEllipsis" MaxLines="1"
                                                       VerticalAlignment="Center" FontFamily="Consolas"/>
                                            <!-- Folder flyout button -->
                                            <Button Grid.Column="1"
                                                    Background="Transparent" BorderThickness="0"
                                                    Padding="4,0" Height="22">
                                                <Button.Flyout>
                                                    <MenuFlyout>
                                                        <MenuFlyoutItem Text="üìÇ  Open in Explorer"
                                                                        Click="OpenFolder_Click" Tag="{x:Bind}"/>
                                                        <MenuFlyoutItem Text="üìÅ  Change install folder"
                                                                        Click="BrowseFolder_Click" Tag="{x:Bind}"/>
                                                        <MenuFlyoutItem Text="‚ùå  Remove manual game"
                                                                        Click="RemoveManualGame_Click" Tag="{x:Bind}"/>
                                                    </MenuFlyout>
                                                </Button.Flyout>
                                                <TextBlock Text="üìÅ" FontSize="12"/>
                                            </Button>
                                        </Grid>
                                    </Border>

                                    <!-- Row 4: Spacer -->
                                    <Grid Grid.Row="4"/>

                                    <!-- Row 5a-alt: No mod available label (game not on wiki, no snapshot) -->
                                    <Border Grid.Row="5"
                                            Visibility="{x:Bind NoModVisibility}"
                                            Background="#181420" CornerRadius="10" Padding="10,0"
                                            BorderBrush="#2A1E38" BorderThickness="1"
                                            VerticalAlignment="Stretch">
                                        <TextBlock Text="No RenoDX mod available for this game"
                                                   FontSize="11" Foreground="#60506A"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                                   TextWrapping="Wrap" TextAlignment="Center"/>
                                    </Border>

                                    <!-- Row 5a: External only (Nexus/Discord with no snapshot) -->
                                    <Button Grid.Row="5"
                                            Visibility="{x:Bind ExternalBtnVisibility}"
                                            Click="ExternalLink_Click" Tag="{x:Bind}"
                                            HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                            CornerRadius="10" FontSize="12" FontWeight="SemiBold"
                                            Background="#1E2840" Foreground="#90C0F0"
                                            BorderBrush="#304870" BorderThickness="1">
                                        <TextBlock Text="{x:Bind ExternalLabel}" FontSize="12"/>
                                    </Button>

                                    <!-- Row 5b: Single install (not dual-bit) -->
                                    <Button Grid.Row="5"
                                            Visibility="{x:Bind InstallOnlyBtnVisibility, Mode=OneWay}"
                                            IsEnabled="{x:Bind CanInstall, Mode=OneWay}"
                                            Click="InstallButton_Click" Tag="{x:Bind}"
                                            HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                            CornerRadius="10" FontSize="13" FontWeight="SemiBold"
                                            Background="#243870" Foreground="#AACCFF"
                                            BorderBrush="#3050A0" BorderThickness="1">
                                        <TextBlock Text="‚¨á  Install" FontSize="13"/>
                                    </Button>

                                    <!-- Row 5c: Dual-bit Unity install -->
                                    <Grid Grid.Row="5"
                                          Visibility="{x:Bind DualBitInstallVisibility, Mode=OneWay}"
                                          VerticalAlignment="Stretch">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="8"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Button Grid.Column="0"
                                                Click="Install64Button_Click" Tag="{x:Bind}"
                                                HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                CornerRadius="10" FontSize="12" FontWeight="SemiBold"
                                                Background="#243870" Foreground="#AACCFF"
                                                BorderBrush="#3050A0" BorderThickness="1">
                                            <TextBlock Text="‚¨á 64-bit" FontSize="12"/>
                                        </Button>
                                        <Button Grid.Column="2"
                                                Click="Install32Button_Click" Tag="{x:Bind}"
                                                HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                CornerRadius="10" FontSize="12" FontWeight="SemiBold"
                                                Background="#1E2848" Foreground="#90AADC"
                                                BorderBrush="#304068" BorderThickness="1">
                                            <TextBlock Text="‚¨á 32-bit" FontSize="12"/>
                                        </Button>
                                    </Grid>

                                    <!-- Row 5d: Reinstall/Update + Delete + optional Nexus/Discord -->
                                    <Grid Grid.Row="5"
                                          Visibility="{x:Bind ReinstallRowVisibility, Mode=OneWay}"
                                          VerticalAlignment="Stretch">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <!-- Reinstall/Update -->
                                        <Button Grid.Column="0"
                                                IsEnabled="{x:Bind CanInstall, Mode=OneWay}"
                                                Click="InstallButton_Click" Tag="{x:Bind}"
                                                HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                CornerRadius="10,0,0,10" FontSize="12" FontWeight="SemiBold"
                                                Background="#22386A" Foreground="#AACCFF"
                                                BorderBrush="#3050A0" BorderThickness="1,1,0,1"
                                                Margin="0,0,1,0">
                                            <TextBlock Text="{x:Bind InstallActionLabel, Mode=OneWay}" FontSize="12"/>
                                        </Button>
                                        <!-- Nexus/Discord link (if available) -->
                                        <Button Grid.Column="1"
                                                Visibility="{x:Bind ExtraLinkVisibility}"
                                                Click="ExternalLink_Click" Tag="{x:Bind}"
                                                HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                CornerRadius="0" FontSize="11"
                                                Background="#141E30" Foreground="#5580A0"
                                                BorderBrush="#1E3050" BorderThickness="0,1,0,1"
                                                Margin="0,0,1,0" Width="44"
                                                ToolTipService.ToolTip="{x:Bind ExternalLabel}">
                                            <TextBlock Text="üåê" FontSize="13"/>
                                        </Button>
                                        <!-- Delete -->
                                        <Button Grid.Column="2"
                                                Click="UninstallButton_Click" Tag="{x:Bind}"
                                                HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                CornerRadius="0,10,10,0" FontSize="13"
                                                Background="#1E1420" Foreground="#7A4870"
                                                BorderBrush="#2E1E38" BorderThickness="1"
                                                Width="40"
                                                ToolTipService.ToolTip="Remove mod">
                                            <TextBlock Text="üóë" FontSize="13"/>
                                        </Button>
                                    </Grid>

                                    <!-- Row 6: Progress + message -->
                                    <StackPanel Grid.Row="6" Spacing="3" Margin="0,5,0,0">
                                        <ProgressBar Visibility="{x:Bind ProgressVisibility, Mode=OneWay}"
                                                     Value="{x:Bind InstallProgress, Mode=OneWay}"
                                                     Maximum="100" Height="3" CornerRadius="2"
                                                     Foreground="#4E7898" Background="#141E30"/>
                                        <TextBlock Text="{x:Bind ActionMessage, Mode=OneWay}"
                                                   Visibility="{x:Bind MessageVisibility, Mode=OneWay}"
                                                   FontSize="10" Foreground="#7090C0"
                                                   TextWrapping="Wrap" MaxLines="2"/>
                                    </StackPanel>

                                </Grid>
                            </Border>

                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>

        <!-- ‚ïê‚ïê STATUS BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <Border Grid.Row="3" Padding="20,6" Background="#0A0E1A"
                BorderBrush="#141C30" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="12">
                <TextBlock x:Name="StatusBarText" Text="Starting..."
                           FontSize="11" Foreground="#2A3450"/>
                <TextBlock Text="|" Foreground="#1F2B3A" VerticalAlignment="Center"/>
                <TextBlock Text="Tip: After installing a mod, click " FontSize="11" Foreground="#4A5878" VerticalAlignment="Center"/>
                <Button Content="Refresh" Click="RefreshButton_Click" FontSize="11" Padding="6,2" Background="Transparent" Foreground="#6B9ED8" BorderThickness="0" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

    </Grid>
</Window>
